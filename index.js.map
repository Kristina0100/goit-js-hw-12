{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/img/error.svg","../src/img/sad_face.svg","../src/img/warning.svg","../src/main.js"],"sourcesContent":["export const createGalleryTemplate = imgData => {\n  return `\n  <li class=\"gallery-card\">\n  <a class=\"gallery-link\" href=${imgData.largeImageURL}>\n    <img class=\"gallery-img\" src=\"${imgData.webformatURL}\" alt=\"${imgData.tags}\" data-source=${imgData.largeImageURL} />\n  </a>\n<div class=\"data-wrapper\">\n<ul class=\"img-info\">\n  <li class=\"param-info\">\n  <h2 class=\"param-name\">Likes</h2>\n  <p class=\"param-value\">${imgData.likes}</p></li>\n  <li class=\"param-info\">\n  <h2 class=\"param-name\">Views</h2>\n  <p class=\"param-value\">${imgData.views}</p></li>\n  <li class=\"param-info\">\n  <h2 class=\"param-name\">Comments</h2>\n  <p class=\"param-value\">${imgData.comments}</p></li>\n  <li class=\"param-info\">\n  <h2 class=\"param-name\">Downloads</h2>\n  <p class=\"param-value\">${imgData.downloads}</p></li>\n</ul>\n</div>\n  </li>\n  `;\n};","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com';\n\nexport const fetchPhotos = (searchedValue, page) => {\n  const axiosParams = {\n    params: {\n      key: '30578441-e990d3db57773391ef0ba167f',\n      q: searchedValue,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: 15,\n    },\n};\n\n  return axios.get(`/api/`, axiosParams);\n};","export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%3e%3cpath%20stroke='%23fff'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='2'%20d='m9%209%206%206m0-6-6%206M8%202h8l6%206v8l-6%206H8l-6-6V8z'/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3csvg%20fill='%23fff'%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%20106.059%20106.059'%20xml:space='preserve'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'%3e%3c/g%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c/g%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cg%3e%3cpath%20d='M90.546,15.518C69.858-5.172,36.199-5.172,15.515,15.513C-5.173,36.198-5.171,69.858,15.517,90.547%20c20.682,20.684,54.341,20.684,75.027-0.004C111.23,69.858,111.229,36.2,90.546,15.518z%20M84.757,84.758%20c-17.494,17.494-45.96,17.496-63.455,0.002c-17.498-17.497-17.496-45.966,0-63.46C38.796,3.807,67.261,3.805,84.759,21.302%20C102.253,38.796,102.251,67.265,84.757,84.758z%20M77.017,74.001c0.658,1.521-0.042,3.286-1.562,3.943%20c-1.521,0.66-3.286-0.042-3.944-1.562c-2.893-6.689-9.73-11.012-17.421-11.012c-7.868,0-14.747,4.319-17.522,11.004%20c-0.479,1.154-1.596,1.851-2.771,1.851c-0.384,0-0.773-0.074-1.15-0.23c-1.53-0.636-2.255-2.392-1.62-3.921%20c3.71-8.932,12.764-14.703,23.063-14.703C64.174,59.371,73.174,65.113,77.017,74.001z%20M33.24,38.671%20c0-3.424,2.777-6.201,6.201-6.201c3.423,0,6.2,2.776,6.2,6.201c0,3.426-2.777,6.202-6.2,6.202%20C36.017,44.873,33.24,42.097,33.24,38.671z%20M61.357,38.671c0-3.424,2.779-6.201,6.203-6.201c3.423,0,6.2,2.776,6.2,6.201%20c0,3.426-2.776,6.202-6.2,6.202S61.357,42.097,61.357,38.671z'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20fill='%23fff'%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='800px'%20height='800px'%20viewBox='0%200%20478.125%20478.125'%20xml:space='preserve'%3e%3cg%3e%3cg%3e%3cg%3e%3ccircle%20cx='239.904'%20cy='314.721'%20r='35.878'/%3e%3cpath%20d='M256.657,127.525h-31.9c-10.557,0-19.125,8.645-19.125,19.125v101.975c0,10.48,8.645,19.125,19.125,19.125h31.9%20c10.48,0,19.125-8.645,19.125-19.125V146.65C275.782,136.17,267.138,127.525,256.657,127.525z'/%3e%3cpath%20d='M239.062,0C106.947,0,0,106.947,0,239.062s106.947,239.062,239.062,239.062c132.115,0,239.062-106.947,239.062-239.062%20S371.178,0,239.062,0z%20M239.292,409.734c-94.171,0-170.595-76.348-170.595-170.596c0-94.248,76.347-170.595,170.595-170.595%20s170.595,76.347,170.595,170.595C409.887,333.387,333.464,409.734,239.292,409.734z'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e\"","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { createGalleryTemplate } from '/js/render-functions';\nimport { fetchPhotos } from '/js/pixabay-api';\n\nimport errorIcon from '/img/error.svg';\nimport sadFaceIcon from '/img/sad_face.svg';\nimport warningIcon from '/img/warning.svg';\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loaderEl = document.querySelector('.loader');\nconst loadMoreBtnEl = document.querySelector('.js-load-btn');\n\nlet currentPage = 1;\nlet inputValue = '';\nlet cardHeight = 0;\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst checkEndOfResults = totalHits => {\n  const totalLoadedPhotos = currentPage * 15;\n  if (totalLoadedPhotos >= totalHits) {\n    loadMoreBtnEl.classList.add('is-hidden');\n    iziToast.show({\n      message: `We're sorry, but you've reached the end of search results.`,\n      messageColor: '#fff',\n      titleColor: '#fff',\n      messageSize: '16px',\n      messageLineHeight: '24px',\n      position: 'topRight',\n      closeOnClick: true,\n      maxWidth: '350px',\n      backgroundColor: '#6c8cff',\n      progressBarColor: '#4e75ff',\n      iconUrl: sadFaceIcon,\n    });\n  };\n};\n\nconst showErrorMessage = () => {\n  iziToast.show({\n    title: 'Error',\n    message: `Something went wrong. Please try again later.`,\n    messageColor: '#fff',\n    titleColor: '#fff',\n    messageSize: '16px',\n    messageLineHeight: '24px',\n    position: 'topRight',\n    closeOnClick: true,\n    maxWidth: '420px',\n    backgroundColor: '#EF4040',\n    progressBarColor: '#B51B1B',\n    iconUrl: '/img/error.svg',\n  });\n};\n\nconst onFormSubmit = async event => {\n  try {\n    event.preventDefault();\n\n    inputValue = searchFormEl.elements.query.value.trim();\n    currentPage = 1;\n    loadMoreBtnEl.classList.add('is-hidden');\n\n    if (!inputValue) {\n      iziToast.show({\n        message: 'Please enter a search term',\n        messageColor: '#fff',\n        messageSize: '16px',\n        messageLineHeight: '24px',\n        iconColor: '#fff',\n        iconUrl: warningIcon,\n        backgroundColor: '#FC7A66',\n        position: 'topRight',\n        closeOnClick: true,\n      });\n      return;\n    };\n\n    loaderEl.classList.remove(\"is-hidden\");\n    galleryEl.innerHTML = '';\n\n    const response = await fetchPhotos(inputValue, currentPage);\n\n    if (response.data.hits.length === 0) {\n      iziToast.show({\n        message: `Sorry, there are no images matching your search query. Please try again!`,\n        messageColor: '#fff',\n        messageSize: '16px',\n        messageLineHeight: '24px',\n        iconUrl: errorIcon,\n        backgroundColor: '#EF4040',\n        maxWidth: '350px',\n        closeOnClick: true,\n        position: 'topRight',\n        progressBarColor: '#B51B1B',\n      });\n\n      loaderEl.classList.add(\"is-hidden\");\n      galleryEl.innerHTML = '';\n\n      return\n    };\n\n    loaderEl.classList.add(\"is-hidden\");\n\n    const galleryCardsTemplate = response.data.hits.map(imgInfo => createGalleryTemplate(imgInfo)).join('');\n    galleryEl.innerHTML = galleryCardsTemplate;\n    loadMoreBtnEl.classList.remove('is-hidden');\n\n    const galleryCardEl = galleryEl.querySelector('li');\n    cardHeight = galleryCardEl.getBoundingClientRect().height;\n\n    lightbox.refresh();\n\n   checkEndOfResults(response.data.totalHits);\n\n  }  catch(err) {\n    showErrorMessage();\n    loaderEl.classList.add(\"is-hidden\");\n  };\n\n};\n\nconst onLoadBtnClick = async event => {\n  try {\n    loaderEl.classList.remove('is-hidden'); \n\n    currentPage++;\n    const response = await fetchPhotos(inputValue, currentPage);\n\n    const galleryCardsTemplate = response.data.hits.map(imgInfo => createGalleryTemplate(imgInfo)).join('');\n    galleryEl.insertAdjacentHTML('beforeend', galleryCardsTemplate);\n\n    lightbox.refresh();\n\n    scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    checkEndOfResults(response.data.totalHits);\n    loaderEl.classList.add('is-hidden');\n\n  } catch (err) {\n    showErrorMessage();\n  };\n};\n\nsearchFormEl.addEventListener('submit', onFormSubmit);\nloadMoreBtnEl.addEventListener('click', onLoadBtnClick);\n"],"names":["createGalleryTemplate","imgData","axios","fetchPhotos","searchedValue","page","axiosParams","errorIcon","sadFaceIcon","warningIcon","searchFormEl","galleryEl","loaderEl","loadMoreBtnEl","currentPage","inputValue","cardHeight","lightbox","SimpleLightbox","checkEndOfResults","totalHits","iziToast","showErrorMessage","onFormSubmit","event","response","galleryCardsTemplate","imgInfo","onLoadBtnClick"],"mappings":"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"}